# 软件需求规格说明书 (SRS) - 用户认证模块

**文档编号**: SRS-001
**模块名称**: User Authentication (用户认证)
**版本**: 1.0

## 1. 功能概述

本模块为系统的核心基础，旨在为用户提供安全的注册和登录功能。所有后续需要用户身份的操作（如发帖、评论）都依赖于本模块。

## 2. 功能性需求

### FR-1: 用户注册
- **描述**: 系统必须提供一个接口，允许新用户通过提供用户名、密码和电子邮箱来创建一个新账户。
- **规则**:
  - 用户名在系统中必须是唯一的。
  - 电子邮箱在系统中必须是唯一的。
  - 密码长度必须在8到20个字符之间。
  - 注册成功后，新用户的信息必须被持久化到数据库中。

### FR-2: 密码安全
- **描述**: 为了保障用户账户安全，用户的密码绝不能以明文形式存储。
- **规则**:
  - 在存入数据库之前，密码必须使用 BCrypt 算法进行哈希加密。

### FR-3: 用户登录
- **描述**: 系统必须提供一个接口，允许已注册的用户通过提交他们的用户名和密码来登录。
- **规则**:
  - 系统需验证提交的用户名是否存在。
  - 若用户存在，系统需验证提交的密码是否与存储的加密密码匹配。
  - 登录成功后，系统必须生成一个有时效性的 JSON Web Token (JWT)，并返回给客户端。

### FR-4: 错误处理
- **描述**: 在注册和登录过程中，系统必须能处理可预见的错误，并向客户端返回明确的错误信息。
- **规则**:
  - **注册时**: 
    - 如果用户名已存在，返回明确的错误提示（如“用户名已被占用”）。
    - 如果邮箱已存在，返回明确的错误提示（如“电子邮箱已被注册”）。
    - 如果密码格式不符合要求，返回明确的错误提示。
  - **登录时**: 
    - 如果用户名不存在或密码不匹配，必须返回统一的、模糊的错误提示（如“用户名或密码错误”），以防止恶意用户探测账户信息。

## 3. 非功能性需求

- **性能**: 注册和登录接口的平均响应时间应在 200ms 以内。
- **安全**: 必须防止明文密码在日志或网络传输中暴露。
