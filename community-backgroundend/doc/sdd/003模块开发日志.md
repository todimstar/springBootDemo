2025.09.17  10:36
1.创造好comments表了
  1.知道现代化表命名为`xxs`复数命名，方便写后续查询时为'select * from xxs;'
  2.navicat中查询和运行不同，查询必加`EXPLAIN`，会导致除了SELCET操作之外都报错
  3.小统一了一下updatePost跟之后createComment时都是(Long id,xxx xxx)
2.开始写Comment，CommentMapper

2025.09.17  12:41
0.已知数据库多对多需要三张表
1.已完成Comment,CommentMapper(CRUD)
2.等待完成ServiceImpl和Controller，Comment的Controller部分需要在PostController实现；
3.等待伴生提取SecurityUtil完成，已升级 --> √  2025.09.17  16:28

16:57
1.Comment的create和delete在Service和Controller层都完成，差分页查询和最后的Security放行
2.完成分页查询了，发现最后的Security放行，不会动态放行

22:18
1.使用通配符动态放行了comment

2025.09.18  17:11
1.发现注册没有检查输入，虽然应该是前端检查的，登录也没有用邮箱登录的 --> 注册已检测完成，登录开始改造为用户名或邮箱登录

-给登录逻辑改造一下，输入可同时为用户名或邮箱
  -修正了Controller层也负责jwt的情况
  -改造LoginResponse为LoginResponseDTO
  -先修改了登录的DTO，将jwtToken封装到LoginResponseDTO中

-注册需要邮箱、用户名、密码都不能为空 --> ok √
-登录从用户名/邮箱+密码   --> √

2025.09.19  9:03
1.PostServiceImplTest有报错，改好了，是因为更新使用了SecurityUtil.getCurrentUser()，单元测试没有Mock这个静态方法
2.测试新登录检查
  0.登录api更改,"username"key改为"usernameOrEmail"  -->已修改SDD √
  1.空邮箱/用户名/密码      --> 400 √
  2.不存在的邮箱/用户名     --> 400 √
  3.错误密码          --> 401 √

11:29
3.测试注册功能：发现传入空是500 --> 其实是自己的json格式错误 --》1.需要多检查传入字符串为null和""
                                    --》2.发现ObjcetMapper负责将url的json参数转换java对象，可相互转换
                                                      ```java//jackson的ObjectMapper，java的json库
                                                                    //将java对象转为json字符串,
                                                                    //用mapper.writeValueAsString(JavaObject)
                                                                    //将json转为java对象,
                                                                    //mapper.readValue(jsonString,JavaObject.class)
                                                                    //需要转为java集合的,
                                                                    //要new TypeReference<集合对象>() {}来充当JavaObject.class
                                                                    ```
4.进入查空大清洗，有isBlank()和springboot的stringutil.havetext() --ok  -->√

5.Exception：出问题了，修改帖子用的3号的jwt，故意写的id8，结果把2号的8号帖子内容改了还没触发帖子不属于3号的异常
  -原因：因为Service层直接调用的Mapper层的updatePost(Post)是直接用传入的Post的id给数据库更新的，所以如果传入的Postid不符合期望就会修改错帖子
  -解决：改造Mapper的updatePost(Post)为updatePost(postId,Post)，并在Controller层在一开始就post.setId(urlPostId)，保证之后的post里id都正确

17:46
1.测试CommentServiceImpl
  1.创建评论    --> 修复创造帖子的insert@options中C.id命名问题  --> 修复创造时未赋值评论的postId和UserId情况
  2.删除评论    --> 正常，未登录、非评论作者、评论不存在、正常删除都ok
  3.分页查询评论  --> 正常，页数为0、负数、页数过大都ok