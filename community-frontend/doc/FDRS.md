# 前端设计与需求规格说明书 (FDRS)

**项目名称**: 社区技术论坛 (Community Frontend)
**版本**: 1.0

## 1. 概述

本文档旨在清晰地定义社区技术论坛前端应用的所有页面、功能模块、组件划分和用户交互流程。它是所有前端开发的最高指导性文件。

## 2. 整体应用结构 (SPA)

本应用是一个**单页应用 (Single-Page Application)**，基于 Vue.js 和 Vue Router 构建。所有页面都在一个主布局 (`App.vue`) 内进行切换，而不是传统的整页刷新。

### 2.1 主布局 (`App.vue`)

- **顶部导航栏**: 始终存在，包含：
  - **Logo**: 点击后返回首页。
  - **导航链接**: “首页”、“帖子列表”。
  - **用户状态区 (右上角)**:
    - **未登录状态**: 显示“登录”和“注册”按钮。
    - **已登录状态**: 显示“欢迎, [用户名]”、“发布新帖”和“登出”按钮。
- **内容区**: `<RouterView />`，用于动态展示当前路由匹配的页面组件。

## 3. 页面 (Views) 规划

本应用规划包含以下核心页面：

### 3.1 首页 (`/`)
- **组件**: `HomeView.vue`
- **功能**: 作为应用的欢迎页和门户。
- **布局**: 
  - 一个醒目的标题，如“欢迎来到社区技术论坛”。
  - 一个简短的介绍性段落。
  - 一个指向“帖子列表”页面的主要行动按钮 (Call-to-Action Button)。

### 3.2 帖子列表页 (`/posts`)
- **组件**: `PostsView.vue`
- **功能**: 分页展示所有帖子。
- **布局**:
  - 页面标题“帖子列表”。
  - **帖子卡片列表**: 使用 `v-for` 循环渲染帖子数据。
    - 每个帖子使用 `<el-card>` 组件展示，包含：
      - **标题**: 帖子标题，可点击并跳转到帖子详情页。
      - **摘要**: 帖子内容的简短摘要（例如前100个字符）。
      - **元信息**: 作者用户名和发布时间。
  - **分页组件**: 页面底部使用 `<el-pagination>` 组件，允许用户跳转页面。

### 3.3 帖子详情页 (`/posts/:id`)
- **组件**: `PostDetailView.vue`
- **功能**: 展示单个帖子的完整内容及其所有评论。
- **布局**:
  - **帖子内容区**: 使用 `<el-card>` 展示。
    - **标题**: 帖子标题。
    - **元信息**: 作者、发布时间。
    - **操作按钮 (仅作者可见)**: 如果当前登录用户是帖子作者，显示“编辑”和“删除”按钮。
    - **正文**: 完整的帖子内容。
  - **评论发布区**:
    - 一个 `<el-form>`，包含一个 `<el-input type="textarea">` 用于输入评论内容。
    - 一个 `<el-button>` 用于提交评论。
  - **评论列表区**:
    - 标题“评论列表”。
    - 循环展示评论，每条评论包含：头像、用户名、评论内容、评论时间。

### 3.4 用户登录页 (`/login`)
- **组件**: `LoginView.vue`
- **功能**: 提供用户登录表单。
- **布局**:
  - 使用 `<el-form>` 构建登录表单，包含：
    - **用户名/邮箱输入框**: `<el-input>`
    - **密码输入框**: `<el-input type="password">`
    - **登录按钮**: `<el-button type="primary">`
  - 提供一个指向“注册页”的链接。

### 3.5 用户注册页 (`/register`)
- **组件**: `RegisterView.vue`
- **功能**: 提供用户注册表单。
- **布局**:
  - 使用 `<el-form>` 构建注册表单，包含：
    - **用户名输入框**
    - **电子邮箱输入框**
    - **密码输入框**
    - **确认密码输入框**
    - **注册按钮**

### 3.6 发布新帖页 (`/create-post`)
- **组件**: `PostCreateView.vue`
- **权限**: **需要登录**。
- **功能**: 提供发布新帖子的表单。
- **布局**:
  - 页面标题“发布新帖”。
  - 使用 `<el-form>` 构建，包含：
    - **帖子标题输入框**: `<el-input>`
    - **帖子内容输入框**: `<el-input type="textarea">`，高度可调。
    - **发布按钮**: `<el-button type="primary">`

## 4. 用户流程 (User Flow)

1.  **游客流程**: 访问网站 -> 可浏览首页、帖子列表、帖子详情 -> 点击“登录/注册” -> 跳转到相应页面。
2.  **登录流程**: 进入登录页 -> 输入信息 -> 点击登录 -> 成功后跳转到首页或帖子列表页，导航栏状态更新。
3.  **发帖流程**: (已登录) 点击“发布新帖” -> 进入发帖页 -> 填写表单 -> 点击发布 -> 成功后自动跳转到新创建的帖子详情页。
4.  **评论流程**: (已登录) 进入帖子详情页 -> 在评论区输入内容 -> 点击提交 -> 评论列表自动刷新，显示新评论。

## 5. 全局状态 (Pinia Store)

- **`auth.js`**: 负责管理用户的认证状态。
  - **State**: `token`, `user` (包含id, username等)。
  - **Actions**: `login`, `logout`, `register`, `fetchCurrentUser` (登录后获取详细用户信息)。
  - **Getters**: `isAuthenticated` (计算属性，判断是否登录)。
